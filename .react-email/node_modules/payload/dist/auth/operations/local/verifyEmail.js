"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _errors = require("../../../errors");
const _setRequestContext = require("../../../express/setRequestContext");
const _init = require("../../../translations/init");
const _verifyEmail = /*#__PURE__*/ _interop_require_default(require("../verifyEmail"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
async function localVerifyEmail(payload, options) {
    const { collection: collectionSlug, context, req = {}, token } = options;
    (0, _setRequestContext.setRequestContext)(req, context);
    const collection = payload.collections[collectionSlug];
    if (!collection) {
        throw new _errors.APIError(`The collection with slug ${String(collectionSlug)} can't be found. Verify Email Operation.`);
    }
    req.payload = payload;
    req.payloadAPI = req.payloadAPI || 'local';
    req.i18n = (0, _init.i18nInit)(payload.config.i18n);
    return (0, _verifyEmail.default)({
        collection,
        req,
        token
    });
}
const _default = localVerifyEmail;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hdXRoL29wZXJhdGlvbnMvbG9jYWwvdmVyaWZ5RW1haWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBHZW5lcmF0ZWRUeXBlcywgUmVxdWVzdENvbnRleHQgfSBmcm9tICcuLi8uLi8uLi8nXG5pbXBvcnQgdHlwZSB7IFBheWxvYWRSZXF1ZXN0IH0gZnJvbSAnLi4vLi4vLi4vZXhwcmVzcy90eXBlcydcbmltcG9ydCB0eXBlIHsgUGF5bG9hZCB9IGZyb20gJy4uLy4uLy4uL3BheWxvYWQnXG5cbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSAnLi4vLi4vLi4vZXJyb3JzJ1xuaW1wb3J0IHsgc2V0UmVxdWVzdENvbnRleHQgfSBmcm9tICcuLi8uLi8uLi9leHByZXNzL3NldFJlcXVlc3RDb250ZXh0J1xuaW1wb3J0IHsgaTE4bkluaXQgfSBmcm9tICcuLi8uLi8uLi90cmFuc2xhdGlvbnMvaW5pdCdcbmltcG9ydCB2ZXJpZnlFbWFpbCBmcm9tICcuLi92ZXJpZnlFbWFpbCdcblxuZXhwb3J0IHR5cGUgT3B0aW9uczxUIGV4dGVuZHMga2V5b2YgR2VuZXJhdGVkVHlwZXNbJ2NvbGxlY3Rpb25zJ10+ID0ge1xuICBjb2xsZWN0aW9uOiBUXG4gIGNvbnRleHQ/OiBSZXF1ZXN0Q29udGV4dFxuICByZXE/OiBQYXlsb2FkUmVxdWVzdFxuICB0b2tlbjogc3RyaW5nXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvY2FsVmVyaWZ5RW1haWw8VCBleHRlbmRzIGtleW9mIEdlbmVyYXRlZFR5cGVzWydjb2xsZWN0aW9ucyddPihcbiAgcGF5bG9hZDogUGF5bG9hZCxcbiAgb3B0aW9uczogT3B0aW9uczxUPixcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCB7IGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLCBjb250ZXh0LCByZXEgPSB7fSBhcyBQYXlsb2FkUmVxdWVzdCwgdG9rZW4gfSA9IG9wdGlvbnNcbiAgc2V0UmVxdWVzdENvbnRleHQocmVxLCBjb250ZXh0KVxuXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBwYXlsb2FkLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25TbHVnXVxuXG4gIGlmICghY29sbGVjdGlvbikge1xuICAgIHRocm93IG5ldyBBUElFcnJvcihcbiAgICAgIGBUaGUgY29sbGVjdGlvbiB3aXRoIHNsdWcgJHtTdHJpbmcoY29sbGVjdGlvblNsdWcpfSBjYW4ndCBiZSBmb3VuZC4gVmVyaWZ5IEVtYWlsIE9wZXJhdGlvbi5gLFxuICAgIClcbiAgfVxuXG4gIHJlcS5wYXlsb2FkID0gcGF5bG9hZFxuICByZXEucGF5bG9hZEFQSSA9IHJlcS5wYXlsb2FkQVBJIHx8ICdsb2NhbCdcbiAgcmVxLmkxOG4gPSBpMThuSW5pdChwYXlsb2FkLmNvbmZpZy5pMThuKVxuXG4gIHJldHVybiB2ZXJpZnlFbWFpbCh7XG4gICAgY29sbGVjdGlvbixcbiAgICByZXEsXG4gICAgdG9rZW4sXG4gIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IGxvY2FsVmVyaWZ5RW1haWxcbiJdLCJuYW1lcyI6WyJsb2NhbFZlcmlmeUVtYWlsIiwicGF5bG9hZCIsIm9wdGlvbnMiLCJjb2xsZWN0aW9uIiwiY29sbGVjdGlvblNsdWciLCJjb250ZXh0IiwicmVxIiwidG9rZW4iLCJzZXRSZXF1ZXN0Q29udGV4dCIsImNvbGxlY3Rpb25zIiwiQVBJRXJyb3IiLCJTdHJpbmciLCJwYXlsb2FkQVBJIiwiaTE4biIsImkxOG5Jbml0IiwiY29uZmlnIiwidmVyaWZ5RW1haWwiXSwibWFwcGluZ3MiOiI7Ozs7K0JBMENBOzs7ZUFBQTs7O3dCQXRDeUI7bUNBQ1M7c0JBQ1Q7b0VBQ0Q7Ozs7OztBQVN4QixlQUFlQSxpQkFDYkMsT0FBZ0IsRUFDaEJDLE9BQW1CO0lBRW5CLE1BQU0sRUFBRUMsWUFBWUMsY0FBYyxFQUFFQyxPQUFPLEVBQUVDLE1BQU0sQ0FBQyxDQUFtQixFQUFFQyxLQUFLLEVBQUUsR0FBR0w7SUFDbkZNLElBQUFBLG9DQUFpQixFQUFDRixLQUFLRDtJQUV2QixNQUFNRixhQUFhRixRQUFRUSxXQUFXLENBQUNMLGVBQWU7SUFFdEQsSUFBSSxDQUFDRCxZQUFZO1FBQ2YsTUFBTSxJQUFJTyxnQkFBUSxDQUNoQixDQUFDLHlCQUF5QixFQUFFQyxPQUFPUCxnQkFBZ0Isd0NBQXdDLENBQUM7SUFFaEc7SUFFQUUsSUFBSUwsT0FBTyxHQUFHQTtJQUNkSyxJQUFJTSxVQUFVLEdBQUdOLElBQUlNLFVBQVUsSUFBSTtJQUNuQ04sSUFBSU8sSUFBSSxHQUFHQyxJQUFBQSxjQUFRLEVBQUNiLFFBQVFjLE1BQU0sQ0FBQ0YsSUFBSTtJQUV2QyxPQUFPRyxJQUFBQSxvQkFBVyxFQUFDO1FBQ2pCYjtRQUNBRztRQUNBQztJQUNGO0FBQ0Y7TUFFQSxXQUFlUCJ9