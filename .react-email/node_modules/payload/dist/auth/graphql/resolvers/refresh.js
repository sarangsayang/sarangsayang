"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _isolateObjectProperty = /*#__PURE__*/ _interop_require_default(require("../../../utilities/isolateObjectProperty"));
const _getExtractJWT = /*#__PURE__*/ _interop_require_default(require("../../getExtractJWT"));
const _refresh = /*#__PURE__*/ _interop_require_default(require("../../operations/refresh"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function refreshResolver(collection) {
    async function resolver(_, args, context) {
        let token;
        const extractJWT = (0, _getExtractJWT.default)(context.req.payload.config);
        token = extractJWT(context.req);
        if (args.token) {
            token = args.token;
        }
        const options = {
            collection,
            depth: 0,
            req: (0, _isolateObjectProperty.default)(context.req, 'transactionID'),
            res: context.res,
            token
        };
        const result = await (0, _refresh.default)(options);
        return result;
    }
    return resolver;
}
const _default = refreshResolver;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hdXRoL2dyYXBocWwvcmVzb2x2ZXJzL3JlZnJlc2gudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDb2xsZWN0aW9uIH0gZnJvbSAnLi4vLi4vLi4vY29sbGVjdGlvbnMvY29uZmlnL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBQYXlsb2FkUmVxdWVzdCB9IGZyb20gJy4uLy4uLy4uL2V4cHJlc3MvdHlwZXMnXG5cbmltcG9ydCBpc29sYXRlT2JqZWN0UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vdXRpbGl0aWVzL2lzb2xhdGVPYmplY3RQcm9wZXJ0eSdcbmltcG9ydCBnZXRFeHRyYWN0SldUIGZyb20gJy4uLy4uL2dldEV4dHJhY3RKV1QnXG5pbXBvcnQgcmVmcmVzaCBmcm9tICcuLi8uLi9vcGVyYXRpb25zL3JlZnJlc2gnXG5cbmZ1bmN0aW9uIHJlZnJlc2hSZXNvbHZlcihjb2xsZWN0aW9uOiBDb2xsZWN0aW9uKSB7XG4gIGFzeW5jIGZ1bmN0aW9uIHJlc29sdmVyKF8sIGFyZ3MsIGNvbnRleHQpIHtcbiAgICBsZXQgdG9rZW5cblxuICAgIGNvbnN0IGV4dHJhY3RKV1QgPSBnZXRFeHRyYWN0SldUKGNvbnRleHQucmVxLnBheWxvYWQuY29uZmlnKVxuICAgIHRva2VuID0gZXh0cmFjdEpXVChjb250ZXh0LnJlcSlcblxuICAgIGlmIChhcmdzLnRva2VuKSB7XG4gICAgICB0b2tlbiA9IGFyZ3MudG9rZW5cbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgY29sbGVjdGlvbixcbiAgICAgIGRlcHRoOiAwLFxuICAgICAgcmVxOiBpc29sYXRlT2JqZWN0UHJvcGVydHk8UGF5bG9hZFJlcXVlc3Q+KGNvbnRleHQucmVxLCAndHJhbnNhY3Rpb25JRCcpLFxuICAgICAgcmVzOiBjb250ZXh0LnJlcyxcbiAgICAgIHRva2VuLFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlZnJlc2gob3B0aW9ucylcblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIHJldHVybiByZXNvbHZlclxufVxuXG5leHBvcnQgZGVmYXVsdCByZWZyZXNoUmVzb2x2ZXJcbiJdLCJuYW1lcyI6WyJyZWZyZXNoUmVzb2x2ZXIiLCJjb2xsZWN0aW9uIiwicmVzb2x2ZXIiLCJfIiwiYXJncyIsImNvbnRleHQiLCJ0b2tlbiIsImV4dHJhY3RKV1QiLCJnZXRFeHRyYWN0SldUIiwicmVxIiwicGF5bG9hZCIsImNvbmZpZyIsIm9wdGlvbnMiLCJkZXB0aCIsImlzb2xhdGVPYmplY3RQcm9wZXJ0eSIsInJlcyIsInJlc3VsdCIsInJlZnJlc2giXSwibWFwcGluZ3MiOiI7Ozs7K0JBa0NBOzs7ZUFBQTs7OzhFQS9Ca0M7c0VBQ1I7Z0VBQ047Ozs7OztBQUVwQixTQUFTQSxnQkFBZ0JDLFVBQXNCO0lBQzdDLGVBQWVDLFNBQVNDLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxPQUFPO1FBQ3RDLElBQUlDO1FBRUosTUFBTUMsYUFBYUMsSUFBQUEsc0JBQWEsRUFBQ0gsUUFBUUksR0FBRyxDQUFDQyxPQUFPLENBQUNDLE1BQU07UUFDM0RMLFFBQVFDLFdBQVdGLFFBQVFJLEdBQUc7UUFFOUIsSUFBSUwsS0FBS0UsS0FBSyxFQUFFO1lBQ2RBLFFBQVFGLEtBQUtFLEtBQUs7UUFDcEI7UUFFQSxNQUFNTSxVQUFVO1lBQ2RYO1lBQ0FZLE9BQU87WUFDUEosS0FBS0ssSUFBQUEsOEJBQXFCLEVBQWlCVCxRQUFRSSxHQUFHLEVBQUU7WUFDeERNLEtBQUtWLFFBQVFVLEdBQUc7WUFDaEJUO1FBQ0Y7UUFFQSxNQUFNVSxTQUFTLE1BQU1DLElBQUFBLGdCQUFPLEVBQUNMO1FBRTdCLE9BQU9JO0lBQ1Q7SUFFQSxPQUFPZDtBQUNUO01BRUEsV0FBZUYifQ==