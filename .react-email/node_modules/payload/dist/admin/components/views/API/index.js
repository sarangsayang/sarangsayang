"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "API", {
    enumerable: true,
    get: function() {
        return API;
    }
});
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _reacti18next = require("react-i18next");
const _ = require("../..");
const _api = require("../../../api");
const _CopyToClipboard = /*#__PURE__*/ _interop_require_default(require("../../elements/CopyToClipboard"));
const _Gutter = require("../../elements/Gutter");
const _Input = require("../../forms/field-types/Checkbox/Input");
const _Input1 = /*#__PURE__*/ _interop_require_default(require("../../forms/field-types/Select/Input"));
const _MinimizeMaximize = require("../../icons/MinimizeMaximize");
const _ActionsProvider = require("../../utilities/ActionsProvider");
const _Config = require("../../utilities/Config");
const _DocumentInfo = require("../../utilities/DocumentInfo");
const _Locale = require("../../utilities/Locale");
const _SetStepNav = require("../collections/Edit/SetStepNav");
require("./index.scss");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {};
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const chars = {
    leftCurlyBracket: '\u007B',
    leftSquareBracket: '\u005B',
    rightCurlyBracket: '\u007D',
    rightSquareBracket: '\u005D'
};
const baseClass = 'query-inspector';
const Bracket = ({ comma = false, position, type })=>{
    const rightBracket = type === 'object' ? chars.rightCurlyBracket : chars.rightSquareBracket;
    const leftBracket = type === 'object' ? chars.leftCurlyBracket : chars.leftSquareBracket;
    const bracketToRender = position === 'end' ? rightBracket : leftBracket;
    return /*#__PURE__*/ _react.createElement("span", {
        className: `${baseClass}__bracket ${baseClass}__bracket--position-${position}`
    }, bracketToRender, position === 'end' && comma ? ',' : null);
};
const RecursivelyRenderObjectData = ({ isEmpty = false, object, objectKey, parentType = 'object', trailingComma = false })=>{
    const objectKeys = Object.keys(object);
    const objectLength = objectKeys.length;
    const [isOpen, setIsOpen] = _react.useState(true);
    return /*#__PURE__*/ _react.createElement("li", null, /*#__PURE__*/ _react.createElement("button", {
        "aria-label": "toggle",
        className: `${baseClass}__list-toggle ${isEmpty ? `${baseClass}__list-toggle--empty` : ''}`,
        onClick: ()=>setIsOpen(!isOpen),
        type: "button"
    }, isEmpty ? null : /*#__PURE__*/ _react.createElement(_.Chevron, {
        className: `${baseClass}__toggle-row-icon ${baseClass}__toggle-row-icon--${isOpen ? 'open' : 'closed'}`
    }), /*#__PURE__*/ _react.createElement("span", null, objectKey && `"${objectKey}": `, /*#__PURE__*/ _react.createElement(Bracket, {
        position: "start",
        type: parentType
    }), isEmpty ? /*#__PURE__*/ _react.createElement(Bracket, {
        comma: trailingComma,
        position: "end",
        type: parentType
    }) : null)), /*#__PURE__*/ _react.createElement("ul", {
        className: `${baseClass}__json-children`
    }, isOpen && objectKeys.map((key, keyIndex)=>{
        let value = object[key];
        let type = 'string';
        const isLastKey = keyIndex === objectLength - 1;
        if (value === null) {
            type = 'null';
        } else if (value instanceof Date) {
            type = 'date';
            value = value.toISOString();
        } else if (Array.isArray(value)) {
            type = 'array';
        } else if (typeof value === 'object') {
            type = 'object';
        } else if (typeof value === 'number') {
            type = 'number';
        } else if (typeof value === 'boolean') {
            type = 'boolean';
        } else {
            type = 'string';
        }
        if (type === 'object' || type === 'array') {
            return /*#__PURE__*/ _react.createElement(RecursivelyRenderObjectData, {
                isEmpty: value.length === 0 || Object.keys(value).length === 0,
                key: `${key}-${keyIndex}`,
                object: value,
                objectKey: parentType === 'object' ? key : undefined,
                parentType: type,
                trailingComma: !isLastKey
            });
        }
        if (type === 'date' || type === 'string' || type === 'null' || type === 'number' || type === 'boolean') {
            const parentHasKey = Boolean(parentType === 'object' && key);
            const rowClasses = [
                `${baseClass}__row-line`,
                `${baseClass}__value-type--${type}`,
                `${baseClass}__row-line--${objectKey ? 'nested' : 'top'}`
            ].filter(Boolean).join(' ');
            return /*#__PURE__*/ _react.createElement("li", {
                className: rowClasses,
                key: `${key}-${keyIndex}`
            }, parentHasKey ? /*#__PURE__*/ _react.createElement("span", null, `"${key}": `) : null, /*#__PURE__*/ _react.createElement("span", {
                className: `${baseClass}__value`
            }, JSON.stringify(value)), isLastKey ? '' : ',');
        }
    })), !isEmpty && /*#__PURE__*/ _react.createElement("span", null, /*#__PURE__*/ _react.createElement(Bracket, {
        comma: trailingComma,
        position: "end",
        type: parentType
    })));
};
function createURL(url) {
    if (url.startsWith('/')) {
        const domain = window.location.origin;
        return new URL(url, domain);
    } else {
        return new URL(url);
    }
}
const API = (props)=>{
    const { apiURL } = props;
    const { i18n } = (0, _reacti18next.useTranslation)();
    const { localization, routes: { api }, serverURL } = (0, _Config.useConfig)();
    const { id, collection, global } = (0, _DocumentInfo.useDocumentInfo)();
    const { code } = (0, _Locale.useLocale)();
    const url = createURL(apiURL);
    const { setViewActions } = (0, _ActionsProvider.useActions)();
    const draftsEnabled = collection?.versions?.drafts || global?.versions?.drafts;
    const docEndpoint = global ? `/globals/${global.slug}` : `/${collection.slug}/${id}`;
    const [data, setData] = _react.useState({});
    const [draft, setDraft] = _react.useState(url.searchParams.get('draft') === 'true');
    const [locale, setLocale] = _react.useState(url.searchParams.get('locale') || code);
    const [depth, setDepth] = _react.useState(url.searchParams.get('depth') || '1');
    const [authenticated, setAuthenticated] = _react.useState(true);
    const [fullscreen, setFullscreen] = _react.useState(false);
    const fetchURL = `${serverURL}${api}${docEndpoint}?locale=${locale}&draft=${draft}&depth=${depth}`;
    _react.useEffect(()=>{
        const fetchData = async ()=>{
            const request = await _api.requests.get(fetchURL, {
                credentials: authenticated ? 'include' : 'omit',
                headers: {
                    'Accept-Language': i18n.language
                }
            });
            const json = await request.json();
            setData(json);
        };
        fetchData();
    }, [
        i18n.language,
        fetchURL,
        authenticated
    ]);
    _react.useEffect(()=>{
        const editConfig = (collection || global)?.admin?.components?.views?.Edit;
        const apiActions = editConfig && 'API' in editConfig && 'actions' in editConfig.API ? editConfig.API.actions : [];
        setViewActions(apiActions);
        return ()=>{
            setViewActions([]);
        };
    }, [
        collection,
        global,
        setViewActions
    ]);
    const localeOptions = localization && localization.locales.map((locale)=>({
            label: locale.label,
            value: locale.code
        }));
    const classes = [
        baseClass,
        fullscreen && `${baseClass}--fullscreen`
    ].filter(Boolean).join(' ');
    let isEditing;
    if ('collection' in props) {
        isEditing = props?.isEditing;
    }
    return /*#__PURE__*/ _react.createElement(_Gutter.Gutter, {
        className: classes,
        right: false
    }, /*#__PURE__*/ _react.createElement(_SetStepNav.SetStepNav, {
        collection: collection,
        global: global,
        id: id,
        isEditing: isEditing,
        view: "API"
    }), /*#__PURE__*/ _react.createElement("div", {
        className: `${baseClass}__configuration`
    }, /*#__PURE__*/ _react.createElement("div", {
        className: `${baseClass}__api-url`
    }, /*#__PURE__*/ _react.createElement("span", {
        className: `${baseClass}__label`
    }, "API URL ", /*#__PURE__*/ _react.createElement(_CopyToClipboard.default, {
        value: fetchURL
    })), /*#__PURE__*/ _react.createElement("a", {
        href: fetchURL,
        rel: "noopener noreferrer",
        target: "_blank"
    }, fetchURL)), /*#__PURE__*/ _react.createElement("div", {
        className: `${baseClass}__form-fields`
    }, /*#__PURE__*/ _react.createElement("div", {
        className: `${baseClass}__filter-query-checkboxes`
    }, draftsEnabled && /*#__PURE__*/ _react.createElement(_Input.CheckboxInput, {
        checked: draft,
        id: "draft-checkbox",
        label: "Draft",
        onToggle: ()=>setDraft(!draft)
    }), /*#__PURE__*/ _react.createElement(_Input.CheckboxInput, {
        checked: authenticated,
        id: "auth-checkbox",
        label: "Authenticated",
        onToggle: ()=>setAuthenticated(!authenticated)
    })), localeOptions && /*#__PURE__*/ _react.createElement(_Input1.default, {
        defaultValue: {
            label: locale,
            value: locale
        },
        label: "Locale",
        name: "locale",
        onChange: (e)=>setLocale(e.value),
        options: localeOptions,
        path: "locale"
    }), /*#__PURE__*/ _react.createElement(_Input1.default, {
        defaultValue: {
            label: depth,
            value: depth
        },
        label: "Depth",
        name: "depth",
        onChange: (e)=>setDepth(e.value),
        options: [
            {
                label: '0',
                value: '0'
            },
            {
                label: '1',
                value: '1'
            },
            {
                label: '2',
                value: '2'
            },
            {
                label: '3',
                value: '3'
            },
            {
                label: '4',
                value: '4'
            }
        ],
        path: "depth"
    }))), /*#__PURE__*/ _react.createElement("div", {
        className: `${baseClass}__results-wrapper`
    }, /*#__PURE__*/ _react.createElement("div", {
        className: `${baseClass}__toggle-fullscreen-button-container`
    }, /*#__PURE__*/ _react.createElement("button", {
        "aria-label": "toggle fullscreen",
        className: `${baseClass}__toggle-fullscreen-button`,
        onClick: ()=>setFullscreen(!fullscreen),
        type: "button"
    }, /*#__PURE__*/ _react.createElement(_MinimizeMaximize.MinimizeMaximize, {
        isMinimized: !fullscreen
    }))), /*#__PURE__*/ _react.createElement("div", {
        className: `${baseClass}__results`
    }, /*#__PURE__*/ _react.createElement(RecursivelyRenderObjectData, {
        object: data
    }))));
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9hZG1pbi9jb21wb25lbnRzL3ZpZXdzL0FQSS9pbmRleC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5cbmltcG9ydCB0eXBlIHsgRWRpdFZpZXdQcm9wcyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5pbXBvcnQgeyBDaGV2cm9uIH0gZnJvbSAnLi4vLi4nXG5pbXBvcnQgeyByZXF1ZXN0cyB9IGZyb20gJy4uLy4uLy4uL2FwaSdcbmltcG9ydCBDb3B5VG9DbGlwYm9hcmQgZnJvbSAnLi4vLi4vZWxlbWVudHMvQ29weVRvQ2xpcGJvYXJkJ1xuaW1wb3J0IHsgR3V0dGVyIH0gZnJvbSAnLi4vLi4vZWxlbWVudHMvR3V0dGVyJ1xuaW1wb3J0IHsgQ2hlY2tib3hJbnB1dCB9IGZyb20gJy4uLy4uL2Zvcm1zL2ZpZWxkLXR5cGVzL0NoZWNrYm94L0lucHV0J1xuaW1wb3J0IFNlbGVjdElucHV0IGZyb20gJy4uLy4uL2Zvcm1zL2ZpZWxkLXR5cGVzL1NlbGVjdC9JbnB1dCdcbmltcG9ydCB7IE1pbmltaXplTWF4aW1pemUgfSBmcm9tICcuLi8uLi9pY29ucy9NaW5pbWl6ZU1heGltaXplJ1xuaW1wb3J0IHsgdXNlQWN0aW9ucyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy9BY3Rpb25zUHJvdmlkZXInXG5pbXBvcnQgeyB1c2VDb25maWcgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMvQ29uZmlnJ1xuaW1wb3J0IHsgdXNlRG9jdW1lbnRJbmZvIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzL0RvY3VtZW50SW5mbydcbmltcG9ydCB7IHVzZUxvY2FsZSB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy9Mb2NhbGUnXG5pbXBvcnQgeyBTZXRTdGVwTmF2IH0gZnJvbSAnLi4vY29sbGVjdGlvbnMvRWRpdC9TZXRTdGVwTmF2J1xuaW1wb3J0ICcuL2luZGV4LnNjc3MnXG5cbmNvbnN0IGNoYXJzID0ge1xuICBsZWZ0Q3VybHlCcmFja2V0OiAnXFx1MDA3QicsXG4gIGxlZnRTcXVhcmVCcmFja2V0OiAnXFx1MDA1QicsXG4gIHJpZ2h0Q3VybHlCcmFja2V0OiAnXFx1MDA3RCcsXG4gIHJpZ2h0U3F1YXJlQnJhY2tldDogJ1xcdTAwNUQnLFxufVxuXG5jb25zdCBiYXNlQ2xhc3MgPSAncXVlcnktaW5zcGVjdG9yJ1xuXG5jb25zdCBCcmFja2V0ID0gKHtcbiAgY29tbWEgPSBmYWxzZSxcbiAgcG9zaXRpb24sXG4gIHR5cGUsXG59OiB7XG4gIGNvbW1hPzogYm9vbGVhblxuICBwb3NpdGlvbjogJ2VuZCcgfCAnc3RhcnQnXG4gIHR5cGU6ICdhcnJheScgfCAnb2JqZWN0J1xufSkgPT4ge1xuICBjb25zdCByaWdodEJyYWNrZXQgPSB0eXBlID09PSAnb2JqZWN0JyA/IGNoYXJzLnJpZ2h0Q3VybHlCcmFja2V0IDogY2hhcnMucmlnaHRTcXVhcmVCcmFja2V0XG4gIGNvbnN0IGxlZnRCcmFja2V0ID0gdHlwZSA9PT0gJ29iamVjdCcgPyBjaGFycy5sZWZ0Q3VybHlCcmFja2V0IDogY2hhcnMubGVmdFNxdWFyZUJyYWNrZXRcbiAgY29uc3QgYnJhY2tldFRvUmVuZGVyID0gcG9zaXRpb24gPT09ICdlbmQnID8gcmlnaHRCcmFja2V0IDogbGVmdEJyYWNrZXRcbiAgcmV0dXJuIChcbiAgICA8c3BhbiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2JyYWNrZXQgJHtiYXNlQ2xhc3N9X19icmFja2V0LS1wb3NpdGlvbi0ke3Bvc2l0aW9ufWB9PlxuICAgICAge2JyYWNrZXRUb1JlbmRlcn1cbiAgICAgIHtwb3NpdGlvbiA9PT0gJ2VuZCcgJiYgY29tbWEgPyAnLCcgOiBudWxsfVxuICAgIDwvc3Bhbj5cbiAgKVxufVxuXG50eXBlIEFyZ3MgPSB7XG4gIGlzRW1wdHk/OiBib29sZWFuXG4gIG9iamVjdDogUmVjb3JkPHN0cmluZywgYW55PiB8IGFueVtdXG4gIG9iamVjdEtleT86IHN0cmluZ1xuICBwYXJlbnRUeXBlPzogJ2FycmF5JyB8ICdvYmplY3QnXG4gIHRyYWlsaW5nQ29tbWE/OiBib29sZWFuXG59XG5cbmNvbnN0IFJlY3Vyc2l2ZWx5UmVuZGVyT2JqZWN0RGF0YSA9ICh7XG4gIGlzRW1wdHkgPSBmYWxzZSxcbiAgb2JqZWN0LFxuICBvYmplY3RLZXksXG4gIHBhcmVudFR5cGUgPSAnb2JqZWN0JyxcbiAgdHJhaWxpbmdDb21tYSA9IGZhbHNlLFxufTogQXJncykgPT4ge1xuICBjb25zdCBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KVxuICBjb25zdCBvYmplY3RMZW5ndGggPSBvYmplY3RLZXlzLmxlbmd0aFxuICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4odHJ1ZSlcblxuICByZXR1cm4gKFxuICAgIDxsaT5cbiAgICAgIDxidXR0b25cbiAgICAgICAgYXJpYS1sYWJlbD1cInRvZ2dsZVwiXG4gICAgICAgIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fbGlzdC10b2dnbGUgJHtpc0VtcHR5ID8gYCR7YmFzZUNsYXNzfV9fbGlzdC10b2dnbGUtLWVtcHR5YCA6ICcnfWB9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzT3BlbighaXNPcGVuKX1cbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICA+XG4gICAgICAgIHtpc0VtcHR5ID8gbnVsbCA6IChcbiAgICAgICAgICA8Q2hldnJvblxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X190b2dnbGUtcm93LWljb24gJHtiYXNlQ2xhc3N9X190b2dnbGUtcm93LWljb24tLSR7XG4gICAgICAgICAgICAgIGlzT3BlbiA/ICdvcGVuJyA6ICdjbG9zZWQnXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICA8c3Bhbj5cbiAgICAgICAgICB7b2JqZWN0S2V5ICYmIGBcIiR7b2JqZWN0S2V5fVwiOiBgfVxuICAgICAgICAgIDxCcmFja2V0IHBvc2l0aW9uPVwic3RhcnRcIiB0eXBlPXtwYXJlbnRUeXBlfSAvPlxuICAgICAgICAgIHtpc0VtcHR5ID8gPEJyYWNrZXQgY29tbWE9e3RyYWlsaW5nQ29tbWF9IHBvc2l0aW9uPVwiZW5kXCIgdHlwZT17cGFyZW50VHlwZX0gLz4gOiBudWxsfVxuICAgICAgICA8L3NwYW4+XG4gICAgICA8L2J1dHRvbj5cblxuICAgICAgPHVsIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fanNvbi1jaGlsZHJlbmB9PlxuICAgICAgICB7aXNPcGVuICYmXG4gICAgICAgICAgb2JqZWN0S2V5cy5tYXAoKGtleSwga2V5SW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IG9iamVjdFtrZXldXG4gICAgICAgICAgICBsZXQgdHlwZSA9ICdzdHJpbmcnXG4gICAgICAgICAgICBjb25zdCBpc0xhc3RLZXkgPSBrZXlJbmRleCA9PT0gb2JqZWN0TGVuZ3RoIC0gMVxuXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgdHlwZSA9ICdudWxsJ1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgdHlwZSA9ICdkYXRlJ1xuICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgdHlwZSA9ICdhcnJheSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICB0eXBlID0gJ29iamVjdCdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICB0eXBlID0gJ251bWJlcidcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgdHlwZSA9ICdib29sZWFuJ1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdHlwZSA9ICdzdHJpbmcnXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnb2JqZWN0JyB8fCB0eXBlID09PSAnYXJyYXknKSB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPFJlY3Vyc2l2ZWx5UmVuZGVyT2JqZWN0RGF0YVxuICAgICAgICAgICAgICAgICAgaXNFbXB0eT17dmFsdWUubGVuZ3RoID09PSAwIHx8IE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggPT09IDB9XG4gICAgICAgICAgICAgICAgICBrZXk9e2Ake2tleX0tJHtrZXlJbmRleH1gfVxuICAgICAgICAgICAgICAgICAgb2JqZWN0PXt2YWx1ZX1cbiAgICAgICAgICAgICAgICAgIG9iamVjdEtleT17cGFyZW50VHlwZSA9PT0gJ29iamVjdCcgPyBrZXkgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICBwYXJlbnRUeXBlPXt0eXBlfVxuICAgICAgICAgICAgICAgICAgdHJhaWxpbmdDb21tYT17IWlzTGFzdEtleX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgdHlwZSA9PT0gJ2RhdGUnIHx8XG4gICAgICAgICAgICAgIHR5cGUgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICAgICAgIHR5cGUgPT09ICdudWxsJyB8fFxuICAgICAgICAgICAgICB0eXBlID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICAgICB0eXBlID09PSAnYm9vbGVhbidcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBwYXJlbnRIYXNLZXkgPSBCb29sZWFuKHBhcmVudFR5cGUgPT09ICdvYmplY3QnICYmIGtleSlcblxuICAgICAgICAgICAgICBjb25zdCByb3dDbGFzc2VzID0gW1xuICAgICAgICAgICAgICAgIGAke2Jhc2VDbGFzc31fX3Jvdy1saW5lYCxcbiAgICAgICAgICAgICAgICBgJHtiYXNlQ2xhc3N9X192YWx1ZS10eXBlLS0ke3R5cGV9YCxcbiAgICAgICAgICAgICAgICBgJHtiYXNlQ2xhc3N9X19yb3ctbGluZS0tJHtvYmplY3RLZXkgPyAnbmVzdGVkJyA6ICd0b3AnfWAsXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgICAgICAgICAgLmpvaW4oJyAnKVxuXG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT17cm93Q2xhc3Nlc30ga2V5PXtgJHtrZXl9LSR7a2V5SW5kZXh9YH0+XG4gICAgICAgICAgICAgICAgICB7cGFyZW50SGFzS2V5ID8gPHNwYW4+e2BcIiR7a2V5fVwiOiBgfTwvc3Bhbj4gOiBudWxsfVxuXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX3ZhbHVlYH0+e0pTT04uc3RyaW5naWZ5KHZhbHVlKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICB7aXNMYXN0S2V5ID8gJycgOiAnLCd9XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pfVxuICAgICAgPC91bD5cblxuICAgICAgeyFpc0VtcHR5ICYmIChcbiAgICAgICAgPHNwYW4+XG4gICAgICAgICAgPEJyYWNrZXQgY29tbWE9e3RyYWlsaW5nQ29tbWF9IHBvc2l0aW9uPVwiZW5kXCIgdHlwZT17cGFyZW50VHlwZX0gLz5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgKX1cbiAgICA8L2xpPlxuICApXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVVSTCh1cmw6IHN0cmluZykge1xuICBpZiAodXJsLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgIGNvbnN0IGRvbWFpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW5cbiAgICByZXR1cm4gbmV3IFVSTCh1cmwsIGRvbWFpbilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IFVSTCh1cmwpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IEFQSTogUmVhY3QuRkM8RWRpdFZpZXdQcm9wcz4gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBhcGlVUkwgfSA9IHByb3BzXG4gIGNvbnN0IHsgaTE4biB9ID0gdXNlVHJhbnNsYXRpb24oKVxuICBjb25zdCB7XG4gICAgbG9jYWxpemF0aW9uLFxuICAgIHJvdXRlczogeyBhcGkgfSxcbiAgICBzZXJ2ZXJVUkwsXG4gIH0gPSB1c2VDb25maWcoKVxuICBjb25zdCB7IGlkLCBjb2xsZWN0aW9uLCBnbG9iYWwgfSA9IHVzZURvY3VtZW50SW5mbygpXG4gIGNvbnN0IHsgY29kZSB9ID0gdXNlTG9jYWxlKClcbiAgY29uc3QgdXJsID0gY3JlYXRlVVJMKGFwaVVSTClcblxuICBjb25zdCB7IHNldFZpZXdBY3Rpb25zIH0gPSB1c2VBY3Rpb25zKClcblxuICBjb25zdCBkcmFmdHNFbmFibGVkID0gY29sbGVjdGlvbj8udmVyc2lvbnM/LmRyYWZ0cyB8fCBnbG9iYWw/LnZlcnNpb25zPy5kcmFmdHNcbiAgY29uc3QgZG9jRW5kcG9pbnQgPSBnbG9iYWwgPyBgL2dsb2JhbHMvJHtnbG9iYWwuc2x1Z31gIDogYC8ke2NvbGxlY3Rpb24uc2x1Z30vJHtpZH1gXG5cbiAgY29uc3QgW2RhdGEsIHNldERhdGFdID0gUmVhY3QudXNlU3RhdGU8YW55Pih7fSlcbiAgY29uc3QgW2RyYWZ0LCBzZXREcmFmdF0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPih1cmwuc2VhcmNoUGFyYW1zLmdldCgnZHJhZnQnKSA9PT0gJ3RydWUnKVxuICBjb25zdCBbbG9jYWxlLCBzZXRMb2NhbGVdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPih1cmwuc2VhcmNoUGFyYW1zLmdldCgnbG9jYWxlJykgfHwgY29kZSlcbiAgY29uc3QgW2RlcHRoLCBzZXREZXB0aF0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdkZXB0aCcpIHx8ICcxJylcbiAgY29uc3QgW2F1dGhlbnRpY2F0ZWQsIHNldEF1dGhlbnRpY2F0ZWRdID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4odHJ1ZSlcbiAgY29uc3QgW2Z1bGxzY3JlZW4sIHNldEZ1bGxzY3JlZW5dID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpXG5cbiAgY29uc3QgZmV0Y2hVUkwgPSBgJHtzZXJ2ZXJVUkx9JHthcGl9JHtkb2NFbmRwb2ludH0/bG9jYWxlPSR7bG9jYWxlfSZkcmFmdD0ke2RyYWZ0fSZkZXB0aD0ke2RlcHRofWBcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGZldGNoRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCByZXF1ZXN0cy5nZXQoZmV0Y2hVUkwsIHtcbiAgICAgICAgY3JlZGVudGlhbHM6IGF1dGhlbnRpY2F0ZWQgPyAnaW5jbHVkZScgOiAnb21pdCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQWNjZXB0LUxhbmd1YWdlJzogaTE4bi5sYW5ndWFnZSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgICAgc2V0RGF0YShqc29uKVxuICAgIH1cblxuICAgIGZldGNoRGF0YSgpXG4gIH0sIFtpMThuLmxhbmd1YWdlLCBmZXRjaFVSTCwgYXV0aGVudGljYXRlZF0pXG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBlZGl0Q29uZmlnID0gKGNvbGxlY3Rpb24gfHwgZ2xvYmFsKT8uYWRtaW4/LmNvbXBvbmVudHM/LnZpZXdzPy5FZGl0XG4gICAgY29uc3QgYXBpQWN0aW9ucyA9XG4gICAgICBlZGl0Q29uZmlnICYmICdBUEknIGluIGVkaXRDb25maWcgJiYgJ2FjdGlvbnMnIGluIGVkaXRDb25maWcuQVBJID8gZWRpdENvbmZpZy5BUEkuYWN0aW9ucyA6IFtdXG5cbiAgICBzZXRWaWV3QWN0aW9ucyhhcGlBY3Rpb25zKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNldFZpZXdBY3Rpb25zKFtdKVxuICAgIH1cbiAgfSwgW2NvbGxlY3Rpb24sIGdsb2JhbCwgc2V0Vmlld0FjdGlvbnNdKVxuXG4gIGNvbnN0IGxvY2FsZU9wdGlvbnMgPVxuICAgIGxvY2FsaXphdGlvbiAmJlxuICAgIGxvY2FsaXphdGlvbi5sb2NhbGVzLm1hcCgobG9jYWxlKSA9PiAoeyBsYWJlbDogbG9jYWxlLmxhYmVsLCB2YWx1ZTogbG9jYWxlLmNvZGUgfSkpXG5cbiAgY29uc3QgY2xhc3NlcyA9IFtiYXNlQ2xhc3MsIGZ1bGxzY3JlZW4gJiYgYCR7YmFzZUNsYXNzfS0tZnVsbHNjcmVlbmBdLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJylcblxuICBsZXQgaXNFZGl0aW5nOiBib29sZWFuXG5cbiAgaWYgKCdjb2xsZWN0aW9uJyBpbiBwcm9wcykge1xuICAgIGlzRWRpdGluZyA9IHByb3BzPy5pc0VkaXRpbmdcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEd1dHRlciBjbGFzc05hbWU9e2NsYXNzZXN9IHJpZ2h0PXtmYWxzZX0+XG4gICAgICA8U2V0U3RlcE5hdlxuICAgICAgICBjb2xsZWN0aW9uPXtjb2xsZWN0aW9ufVxuICAgICAgICBnbG9iYWw9e2dsb2JhbH1cbiAgICAgICAgaWQ9e2lkfVxuICAgICAgICBpc0VkaXRpbmc9e2lzRWRpdGluZ31cbiAgICAgICAgdmlldz1cIkFQSVwiXG4gICAgICAvPlxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2NvbmZpZ3VyYXRpb25gfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2FwaS11cmxgfT5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2xhYmVsYH0+XG4gICAgICAgICAgICBBUEkgVVJMIDxDb3B5VG9DbGlwYm9hcmQgdmFsdWU9e2ZldGNoVVJMfSAvPlxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8YSBocmVmPXtmZXRjaFVSTH0gcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiIHRhcmdldD1cIl9ibGFua1wiPlxuICAgICAgICAgICAge2ZldGNoVVJMfVxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2Zvcm0tZmllbGRzYH0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2ZpbHRlci1xdWVyeS1jaGVja2JveGVzYH0+XG4gICAgICAgICAgICB7ZHJhZnRzRW5hYmxlZCAmJiAoXG4gICAgICAgICAgICAgIDxDaGVja2JveElucHV0XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17ZHJhZnR9XG4gICAgICAgICAgICAgICAgaWQ9XCJkcmFmdC1jaGVja2JveFwiXG4gICAgICAgICAgICAgICAgbGFiZWw9XCJEcmFmdFwiXG4gICAgICAgICAgICAgICAgb25Ub2dnbGU9eygpID0+IHNldERyYWZ0KCFkcmFmdCl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPENoZWNrYm94SW5wdXRcbiAgICAgICAgICAgICAgY2hlY2tlZD17YXV0aGVudGljYXRlZH1cbiAgICAgICAgICAgICAgaWQ9XCJhdXRoLWNoZWNrYm94XCJcbiAgICAgICAgICAgICAgbGFiZWw9XCJBdXRoZW50aWNhdGVkXCJcbiAgICAgICAgICAgICAgb25Ub2dnbGU9eygpID0+IHNldEF1dGhlbnRpY2F0ZWQoIWF1dGhlbnRpY2F0ZWQpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHtsb2NhbGVPcHRpb25zICYmIChcbiAgICAgICAgICAgIDxTZWxlY3RJbnB1dFxuICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3tcbiAgICAgICAgICAgICAgICBsYWJlbDogbG9jYWxlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBsb2NhbGUsXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGxhYmVsPVwiTG9jYWxlXCJcbiAgICAgICAgICAgICAgbmFtZT1cImxvY2FsZVwiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0TG9jYWxlKGUudmFsdWUgYXMgc3RyaW5nKX1cbiAgICAgICAgICAgICAgb3B0aW9ucz17bG9jYWxlT3B0aW9uc31cbiAgICAgICAgICAgICAgcGF0aD1cImxvY2FsZVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgICAgPFNlbGVjdElucHV0XG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3tcbiAgICAgICAgICAgICAgbGFiZWw6IGRlcHRoLFxuICAgICAgICAgICAgICB2YWx1ZTogZGVwdGgsXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgbGFiZWw9XCJEZXB0aFwiXG4gICAgICAgICAgICBuYW1lPVwiZGVwdGhcIlxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXREZXB0aChlLnZhbHVlIGFzIHN0cmluZyl9XG4gICAgICAgICAgICBvcHRpb25zPXtbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJzAnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnMCcsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJzEnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnMScsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJzInLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnMicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJzMnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnMycsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJzQnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnNCcsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdfVxuICAgICAgICAgICAgcGF0aD1cImRlcHRoXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fcmVzdWx0cy13cmFwcGVyYH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X190b2dnbGUtZnVsbHNjcmVlbi1idXR0b24tY29udGFpbmVyYH0+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cInRvZ2dsZSBmdWxsc2NyZWVuXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fdG9nZ2xlLWZ1bGxzY3JlZW4tYnV0dG9uYH1cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEZ1bGxzY3JlZW4oIWZ1bGxzY3JlZW4pfVxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPE1pbmltaXplTWF4aW1pemUgaXNNaW5pbWl6ZWQ9eyFmdWxsc2NyZWVufSAvPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX3Jlc3VsdHNgfT5cbiAgICAgICAgICA8UmVjdXJzaXZlbHlSZW5kZXJPYmplY3REYXRhIG9iamVjdD17ZGF0YX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L0d1dHRlcj5cbiAgKVxufVxuIl0sIm5hbWVzIjpbIkFQSSIsImNoYXJzIiwibGVmdEN1cmx5QnJhY2tldCIsImxlZnRTcXVhcmVCcmFja2V0IiwicmlnaHRDdXJseUJyYWNrZXQiLCJyaWdodFNxdWFyZUJyYWNrZXQiLCJiYXNlQ2xhc3MiLCJCcmFja2V0IiwiY29tbWEiLCJwb3NpdGlvbiIsInR5cGUiLCJyaWdodEJyYWNrZXQiLCJsZWZ0QnJhY2tldCIsImJyYWNrZXRUb1JlbmRlciIsInNwYW4iLCJjbGFzc05hbWUiLCJSZWN1cnNpdmVseVJlbmRlck9iamVjdERhdGEiLCJpc0VtcHR5Iiwib2JqZWN0Iiwib2JqZWN0S2V5IiwicGFyZW50VHlwZSIsInRyYWlsaW5nQ29tbWEiLCJvYmplY3RLZXlzIiwiT2JqZWN0Iiwia2V5cyIsIm9iamVjdExlbmd0aCIsImxlbmd0aCIsImlzT3BlbiIsInNldElzT3BlbiIsIlJlYWN0IiwidXNlU3RhdGUiLCJsaSIsImJ1dHRvbiIsImFyaWEtbGFiZWwiLCJvbkNsaWNrIiwiQ2hldnJvbiIsInVsIiwibWFwIiwia2V5Iiwia2V5SW5kZXgiLCJ2YWx1ZSIsImlzTGFzdEtleSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIkFycmF5IiwiaXNBcnJheSIsInVuZGVmaW5lZCIsInBhcmVudEhhc0tleSIsIkJvb2xlYW4iLCJyb3dDbGFzc2VzIiwiZmlsdGVyIiwiam9pbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJjcmVhdGVVUkwiLCJ1cmwiLCJzdGFydHNXaXRoIiwiZG9tYWluIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJVUkwiLCJwcm9wcyIsImFwaVVSTCIsImkxOG4iLCJ1c2VUcmFuc2xhdGlvbiIsImxvY2FsaXphdGlvbiIsInJvdXRlcyIsImFwaSIsInNlcnZlclVSTCIsInVzZUNvbmZpZyIsImlkIiwiY29sbGVjdGlvbiIsImdsb2JhbCIsInVzZURvY3VtZW50SW5mbyIsImNvZGUiLCJ1c2VMb2NhbGUiLCJzZXRWaWV3QWN0aW9ucyIsInVzZUFjdGlvbnMiLCJkcmFmdHNFbmFibGVkIiwidmVyc2lvbnMiLCJkcmFmdHMiLCJkb2NFbmRwb2ludCIsInNsdWciLCJkYXRhIiwic2V0RGF0YSIsImRyYWZ0Iiwic2V0RHJhZnQiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJsb2NhbGUiLCJzZXRMb2NhbGUiLCJkZXB0aCIsInNldERlcHRoIiwiYXV0aGVudGljYXRlZCIsInNldEF1dGhlbnRpY2F0ZWQiLCJmdWxsc2NyZWVuIiwic2V0RnVsbHNjcmVlbiIsImZldGNoVVJMIiwidXNlRWZmZWN0IiwiZmV0Y2hEYXRhIiwicmVxdWVzdCIsInJlcXVlc3RzIiwiY3JlZGVudGlhbHMiLCJoZWFkZXJzIiwibGFuZ3VhZ2UiLCJqc29uIiwiZWRpdENvbmZpZyIsImFkbWluIiwiY29tcG9uZW50cyIsInZpZXdzIiwiRWRpdCIsImFwaUFjdGlvbnMiLCJhY3Rpb25zIiwibG9jYWxlT3B0aW9ucyIsImxvY2FsZXMiLCJsYWJlbCIsImNsYXNzZXMiLCJpc0VkaXRpbmciLCJHdXR0ZXIiLCJyaWdodCIsIlNldFN0ZXBOYXYiLCJ2aWV3IiwiZGl2IiwiQ29weVRvQ2xpcGJvYXJkIiwiYSIsImhyZWYiLCJyZWwiLCJ0YXJnZXQiLCJDaGVja2JveElucHV0IiwiY2hlY2tlZCIsIm9uVG9nZ2xlIiwiU2VsZWN0SW5wdXQiLCJkZWZhdWx0VmFsdWUiLCJuYW1lIiwib25DaGFuZ2UiLCJlIiwib3B0aW9ucyIsInBhdGgiLCJNaW5pbWl6ZU1heGltaXplIiwiaXNNaW5pbWl6ZWQiXSwibWFwcGluZ3MiOiI7Ozs7K0JBNkthQTs7O2VBQUFBOzs7K0RBN0tVOzhCQUNRO2tCQUlQO3FCQUNDO3dFQUNHO3dCQUNMO3VCQUNPOytEQUNOO2tDQUNTO2lDQUNOO3dCQUNEOzhCQUNNO3dCQUNOOzRCQUNDO1FBQ3BCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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